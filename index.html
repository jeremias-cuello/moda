<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Reto</title>
</head>
<body>
  <section class="input">
    <h2 class="input__title">Entrada</h2>
    <article class="input__article">
      <h3 class="article__title">NÃºmeros</h3>
      <textarea type="text" class="article__data" id="input__numbers" style="width: 700px; height: 50px;"></textarea>
      <button class="article__button" id="autocomplete" type="button">Autocompletar</button>
      <button class="article__button" id="procesar" type="button">procesar</button>
    </article>
  </section>
  <div class="output">
    <h2 class="output__title">Salida</h2>
    <p class="output__data"></p>
  </div>
  <canvas></canvas>
  <script src="main.js"></script>
  <script>
    document.querySelector('#autocomplete').addEventListener('click', () => {
      const size = 90;
      document.querySelector('#input__numbers').value = generateNumbers(size).join(', ');
    })

    document.querySelector('#procesar').addEventListener('click', () => {
      const numberStr = document.querySelector('#input__numbers').value;
      console.log(numberStr);
      const numbers = numberStr.split(', ');
      let resultStr = '';
      const results = procesar(numbers);
      const output = document.querySelector('.output__data');

      const repeticiones = results.map(res => res.repeat);
      const maxRepe = repeticiones.reduce((acc, curr) => (acc < curr) ? curr : acc, repeticiones[0]);
      const moda = results.filter(res => res.repeat == maxRepe).map(m => m.num);

      results.forEach(({num, repeat}) => {
        resultStr += num + ': ' + repeat + '<br>';
      });
      resultStr += `La moda con ${maxRepe} repeticiones ${moda.length > 1 ? 'son' : 'es'}: ${moda.join(', ')}`;
      output.innerHTML = resultStr;
    })

  </script>
</body>
</html>
